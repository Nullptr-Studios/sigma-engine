\doxysection{Audio\+Engine.\+hpp}
\hypertarget{_audio_engine_8hpp_source}{}\label{_audio_engine_8hpp_source}\index{D:/Git/fight-\/night-\/finale-\/engine/src/Audio/AudioEngine.hpp@{D:/Git/fight-\/night-\/finale-\/engine/src/Audio/AudioEngine.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <FMOD/fmod\_studio.hpp>}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <FMOD/fmod.hpp>}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ <iostream>}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ <map>}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}AudioData.hpp"{}}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00025\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{_audio_engine_8cpp_a4c16e652cda47a38716864e2ed463fb9}{ERRCHECK\_fn}}(FMOD\_RESULT\ result,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ file,\ \textcolor{keywordtype}{int}\ line);}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#define\ ERRCHECK(\_result)\ ERRCHECK\_fn(\_result,\ \_\_FILE\_\_,\ \_\_LINE\_\_)}}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00033\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_f_n_f_e}{FNFE}}\ \{}
\DoxyCodeLine{00034\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_f_n_f_e_1_1_audio_engine_a949db2ec1f970c80ebf3fa6912d57a9a}{AudioEngine}}}
\DoxyCodeLine{00035\ \{}
\DoxyCodeLine{00036\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00041\ \ \ \mbox{\hyperlink{class_f_n_f_e_1_1_audio_engine_a949db2ec1f970c80ebf3fa6912d57a9a}{AudioEngine}}();}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00046\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_n_f_e_1_1_audio_engine_a96e1c730c2a6719cd71844aede240e72}{Init}}();}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00051\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_n_f_e_1_1_audio_engine_ab2d321df4e651c35c62456d17296a8df}{Terminate}}();}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00056\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_n_f_e_1_1_audio_engine_a9489a9b88b8ad86d6bb41dbcb0894c3d}{Update}}();}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00064\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_n_f_e_1_1_audio_engine_abde3168d69db251428394672bd6b09aa}{Load}}(AudioData\ audioData);}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00070\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_n_f_e_1_1_audio_engine_accf93fccd17448d0a9145680b4e42cf6}{Play}}(AudioData\ audioData);}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00075\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_n_f_e_1_1_audio_engine_a810baa6466e1453df5353672bef223a8}{Stop}}(AudioData\ audioData);}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00083\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_n_f_e_1_1_audio_engine_a7b55832b7488d6fb1839ccdf0d67e781}{UpdateVolume}}(AudioData\ \&audioData,\ \textcolor{keywordtype}{float}\ newVolume,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ fadeSampleLength\ =\ 0);}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00090\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_n_f_e_1_1_audio_engine_a292dc2b930f619d6265abba376a747fe}{Update3DPosition}}(AudioData\ audioData);}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00095\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_f_n_f_e_1_1_audio_engine_a6b1cc61feddac8f9047c2ad494d5bb24}{IsPlaying}}(AudioData\ audioData);}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00103\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_n_f_e_1_1_audio_engine_ac9ddf1cce8d65acd7fccf01ad7231cc9}{Set3DListenerPosition}}(\textcolor{keywordtype}{float}\ posX,\ \ \ \ \ \textcolor{keywordtype}{float}\ posY,\ \ \ \ \ \textcolor{keywordtype}{float}\ posZ,}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ forwardX,\ \textcolor{keywordtype}{float}\ forwardY,\ \textcolor{keywordtype}{float}\ forwardZ,}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ upX,\ \ \ \ \ \ \textcolor{keywordtype}{float}\ upY,\ \ \ \ \ \ \textcolor{keywordtype}{float}\ upZ);}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00111\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_f_n_f_e_1_1_audio_engine_ada7da0ca612f60319a5c7eddda4aa82b}{GetLengthMS}}(AudioData\ audioData);}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00116\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_n_f_e_1_1_audio_engine_ae05cfc16d7f7886299e50c8626130427}{LoadBank}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ filePath);}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00121\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_n_f_e_1_1_audio_engine_a47eb5d68a08f1af0c972f73120c56635}{LoadEvent}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ eventName,\ std::vector<std::pair<const\ char*,\ float>>\ paramsValues\ =\ \{\ \});}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00126\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_n_f_e_1_1_audio_engine_a7672100c5df2ca5d559272dfcd8b40da}{SetEventParamValue}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ eventName,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ parameterName,\ \textcolor{keywordtype}{float}\ value);}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00133\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_n_f_e_1_1_audio_engine_a9434a65686cd2a02a43fb574b44a55eb}{PlayEvent}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ eventName,\ \textcolor{keywordtype}{int}\ instanceIndex\ =\ 0);}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00138\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_n_f_e_1_1_audio_engine_ad8dba94f68cfff83c732b7d9bbdc2f22}{StopEvent}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ eventName,\ \textcolor{keywordtype}{int}\ instanceIndex\ =\ 0);}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00144\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_n_f_e_1_1_audio_engine_afdb0abc24cca6894af6ddbf532c8e675}{SetEventVolume}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ eventName,\ \textcolor{keywordtype}{float}\ normalizedVolume\ =\ 0.75f);}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00149\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_f_n_f_e_1_1_audio_engine_a6b1cc61feddac8f9047c2ad494d5bb24}{IsPlaying}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ eventName,\ \textcolor{keywordtype}{int}\ instance\ =\ 0);}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00154\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_n_f_e_1_1_audio_engine_a494eae132624b142d54f5ed5a6ef7795}{MuteAll}}();}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00159\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_n_f_e_1_1_audio_engine_a723973a02bb0023ff5bdc4503409e3ed}{UnmuteAll}}();}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00164\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_f_n_f_e_1_1_audio_engine_a4e2458fbf06117f78293ee4546741f7b}{IsMute}}();}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ \textcolor{comment}{//\ The\ audio\ sampling\ rate\ of\ the\ audio\ engine}}
\DoxyCodeLine{00167\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ AUDIO\_SAMPLE\_RATE\ =\ 44100;}
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00169\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00174\ \ \ \textcolor{keywordtype}{bool}\ IsLoaded(AudioData\ audioData);}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00179\ \ \ \textcolor{keywordtype}{void}\ Set3DChannelPosition(AudioData\ audioData,\ \mbox{\hyperlink{class_f_m_o_d_1_1_channel}{FMOD::Channel}}*\ channel);}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00184\ \ \ \textcolor{keywordtype}{void}\ InitializeReverb();}
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00189\ \ \ \textcolor{keywordtype}{void}\ DebugEventInfo(\mbox{\hyperlink{class_f_m_o_d_1_1_studio_1_1_event_description}{FMOD::Studio::EventDescription}}*\ eventDescription);}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00191\ \ \ \textcolor{comment}{//\ FMOD\ Studio\ API\ system,\ which\ can\ play\ FMOD\ sound\ banks\ (*.bank)}}
\DoxyCodeLine{00192\ \ \ \mbox{\hyperlink{class_f_m_o_d_1_1_studio_1_1_system}{FMOD::Studio::System}}*\ studioSystem\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00194\ \ \ \textcolor{comment}{//\ FMOD's\ low-\/level\ audio\ system\ which\ plays\ audio\ files\ and\ is\ obtained\ from\ Studio\ System}}
\DoxyCodeLine{00195\ \ \ \mbox{\hyperlink{class_f_m_o_d_1_1_system}{FMOD::System}}*\ lowLevelSystem\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00197\ \ \ \textcolor{comment}{//\ Max\ FMOD::Channels\ for\ the\ audio\ engine}}
\DoxyCodeLine{00198\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ MAX\_AUDIO\_CHANNELS\ =\ 255;}
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00200\ \ \ \textcolor{comment}{//\ Units\ per\ meter.\ \ I.e\ feet\ would\ =\ 3.28.\ \ centimeters\ would\ =\ 100.}}
\DoxyCodeLine{00201\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ DISTANCEFACTOR\ =\ 1.0f;}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00203\ \ \ \textcolor{comment}{//\ Listener\ head\ position,\ initialized\ to\ default\ value}}
\DoxyCodeLine{00204\ \ \ \mbox{\hyperlink{struct_f_m_o_d___v_e_c_t_o_r}{FMOD\_VECTOR}}\ listenerPosition\ =\ \{\ 0.0f,\ 0.0f,\ -\/1.0f\ *\ DISTANCEFACTOR\ \};}
\DoxyCodeLine{00205\ }
\DoxyCodeLine{00206\ \ \ \textcolor{comment}{//\ Listener\ forward\ vector,\ initialized\ to\ default\ value}}
\DoxyCodeLine{00207\ \ \ \mbox{\hyperlink{struct_f_m_o_d___v_e_c_t_o_r}{FMOD\_VECTOR}}\ forward\ \ \ \ \ =\ \{\ 0.0f,\ 0.0f,\ 1.0f\ \};}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \textcolor{comment}{//\ Listener\ upwards\ vector,\ initialized\ to\ default\ value}}
\DoxyCodeLine{00210\ \ \ \mbox{\hyperlink{struct_f_m_o_d___v_e_c_t_o_r}{FMOD\_VECTOR}}\ up\ \ \ \ \ \ \ \ \ \ =\ \{\ 0.0f,\ 1.0f,\ 0.0f\ \};}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00212\ \ \ \textcolor{comment}{//\ Main\ group\ for\ low\ level\ system\ which\ all\ sounds\ go\ though}}
\DoxyCodeLine{00213\ \ \ \mbox{\hyperlink{class_f_m_o_d_1_1_channel_group}{FMOD::ChannelGroup}}*\ mastergroup\ =\ 0;}
\DoxyCodeLine{00214\ }
\DoxyCodeLine{00215\ \ \ \textcolor{comment}{//\ Low-\/level\ system\ reverb\ TODO\ add\ multi-\/reverb\ support}}
\DoxyCodeLine{00216\ \ \ \mbox{\hyperlink{class_f_m_o_d_1_1_reverb3_d}{FMOD::Reverb3D}}*\ reverb;}
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00218\ \ \ \textcolor{comment}{//\ Reverb\ origin\ position}}
\DoxyCodeLine{00219\ \ \ \mbox{\hyperlink{struct_f_m_o_d___v_e_c_t_o_r}{FMOD\_VECTOR}}\ revPos\ =\ \{\ 0.0f,\ 0.0f,\ 0.0f\ \};}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00221\ \ \ \textcolor{comment}{//\ reverb\ min,\ max\ distances}}
\DoxyCodeLine{00222\ \ \ \textcolor{keywordtype}{float}\ revMinDist\ =\ 10.0f,\ revMaxDist\ =\ 50.0f;}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00224\ \ \ \textcolor{comment}{//\ flag\ tracking\ if\ the\ Audio\ Engin\ is\ muted}}
\DoxyCodeLine{00225\ \ \ \textcolor{keywordtype}{bool}\ muted\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00226\ }
\DoxyCodeLine{00227\ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00228\ \textcolor{comment}{\ \ \ *\ Map\ which\ caches\ FMOD\ Low-\/Level\ sounds}}
\DoxyCodeLine{00229\ \textcolor{comment}{\ \ \ *\ Key\ is\ the\ AudioData's\ uniqueKey\ field.}}
\DoxyCodeLine{00230\ \textcolor{comment}{\ \ \ *\ Value\ is\ the\ FMOD::Sound*\ to\ be\ played\ back.}}
\DoxyCodeLine{00231\ \textcolor{comment}{\ \ \ *\ TODO\ Refactor\ to\ use\ numeric\ UID\ as\ key}}
\DoxyCodeLine{00232\ \textcolor{comment}{\ \ \ */}}
\DoxyCodeLine{00233\ \ \ std::map<std::string,\ FMOD::Sound*>\ sounds;}
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00235\ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00236\ \textcolor{comment}{\ \ \ *\ Map\ which\ stores\ the\ current\ playback\ channels\ of\ any\ playing\ sound\ loop}}
\DoxyCodeLine{00237\ \textcolor{comment}{\ \ \ *\ Key\ is\ the\ AudioData's\ uniqueKey\ field.}}
\DoxyCodeLine{00238\ \textcolor{comment}{\ \ \ *\ Value\ is\ the\ FMOD::Channel*\ the\ FMOD::Sound*\ is\ playing\ back\ on.}}
\DoxyCodeLine{00239\ \textcolor{comment}{\ \ \ */}}
\DoxyCodeLine{00240\ \ \ std::map<std::string,\ FMOD::Channel*>\ loopsPlaying;}
\DoxyCodeLine{00241\ }
\DoxyCodeLine{00242\ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00243\ \textcolor{comment}{\ \ \ *\ Map\ which\ stores\ the\ soundbanks\ loaded\ with\ loadFMODStudioBank()}}
\DoxyCodeLine{00244\ \textcolor{comment}{\ \ \ */}}
\DoxyCodeLine{00245\ \ \ std::map<std::string,\ FMOD::Studio::Bank*>\ soundBanks;}
\DoxyCodeLine{00246\ }
\DoxyCodeLine{00247\ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00248\ \textcolor{comment}{\ \ \ *\ Map\ which\ stores\ event\ descriptions\ created\ during\ loadFMODStudioEvent()}}
\DoxyCodeLine{00249\ \textcolor{comment}{\ \ \ */}}
\DoxyCodeLine{00250\ \ \ std::map<std::string,\ FMOD::Studio::EventDescription*>\ eventDescriptions;}
\DoxyCodeLine{00251\ }
\DoxyCodeLine{00252\ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00253\ \textcolor{comment}{\ \ \ *\ Map\ which\ stores\ event\ instances\ created\ during\ loadFMODStudioEvent()}}
\DoxyCodeLine{00254\ \textcolor{comment}{\ \ \ */}}
\DoxyCodeLine{00255\ \ \ std::map<std::string,\ FMOD::Studio::EventInstance*>\ eventInstances;}
\DoxyCodeLine{00256\ \};}
\DoxyCodeLine{00257\ \}}

\end{DoxyCode}
